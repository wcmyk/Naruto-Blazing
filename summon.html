<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Summon — Blazing</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <!-- 16:9 Game Canvas Architecture -->
  <link rel="stylesheet" href="css/game-canvas.css" />
  <!-- Game UI Styles -->
  <link rel="stylesheet" href="css/summon.css" />
  <link rel="stylesheet" href="css/background.css" />
  <link rel="stylesheet" href="css/summon-dev-panel.css" />
  <link rel="stylesheet" href="css/summon-banner-carousel.css" />
  <link rel="stylesheet" href="css/summon-results.css" />
  <link rel="stylesheet" href="css/settings-modal.css" />
  <!-- Hide scrollbar but keep functionality -->
  <style>
    /* Hide scrollbar for Chrome, Safari and Opera */
    body::-webkit-scrollbar,
    html::-webkit-scrollbar,
    *::-webkit-scrollbar {
      display: none;
    }

    /* Hide scrollbar for IE, Edge and Firefox */
    body, html, * {
      -ms-overflow-style: none;  /* IE and Edge */
      scrollbar-width: none;  /* Firefox */
    }
  </style>
</head>
<body class="page-summon">
  <!-- 16:9 Game Canvas Wrapper -->
  <div class="game-canvas-wrapper">
    <div class="game-canvas">
      <div class="game-content">
        <!-- Background -->
        <div id="summon-bg"></div>

        <!-- Animated Wind Particles -->
        <div class="wind-particles" id="wind-particles"></div>

        <!-- Top Bar Overlay - Ninja Rank, Username & Currency HUD (MATCHES INDEX.HTML) -->
        <div class="top-bar">
    <!-- Left: Ninja Rank -->
    <div class="ninja-rank-container">
      <div class="ninja-rank-info">
        <span class="ninja-rank-label">Ninja Rank:</span>
        <span class="ninja-rank-value" id="ninja-rank-value">1</span>
      </div>
      <div class="level-progress-bar-container">
        <div class="level-progress-bar">
          <div class="level-progress-fill" id="level-progress-fill"></div>
        </div>
      </div>
    </div>

    <!-- Center: Player Username -->
    <div class="username-container">
      <div class="username-holder">
        <span class="username-text" id="username-display">Ninja</span>
      </div>
    </div>

    <!-- Right: Currency HUD -->
    <div class="currency-hud">
      <div class="currency-item ninja-pearls">
        <img src="assets/icons/currency/ninjapearl.png" alt="Ninja Pearls" class="currency-icon"
             onerror="this.style.display='none';">
        <span class="currency-amount" id="currency-ninja-pearls">0</span>
      </div>
      <div class="currency-item shinobites">
        <img src="assets/icons/currency/shinobite.png" alt="Shinobites" class="currency-icon"
             onerror="this.style.display='none';">
        <span class="currency-amount" id="currency-shinobites">0</span>
      </div>
      <div class="currency-item ryo">
        <img src="assets/icons/currency/ryo.png" alt="Ryo" class="currency-icon"
             onerror="this.style.display='none';">
        <span class="currency-amount" id="currency-ryo">0</span>
      </div>
    </div>
  </div>

  <!-- Back Button -->
  <button class="btn-back" id="btn-back-to-home">
    <span class="back-icon">◀</span>
    <span class="back-text">BACK</span>
  </button>

  <!-- Main Title -->
  <h1 class="summon-title">SUMMON</h1>

  <!-- Banner Preview Carousel (with labels) -->
  <div class="banner-preview-container">
    <div class="preview-scroll" id="preview-scroll">
      <div class="preview-item" data-banner="0">
        <img src="assets/summon/preview/itachi_prev.png" alt="Banner 1">
        <div class="preview-label">Single/Multi</div>
      </div>
      <div class="preview-item" data-banner="1">
        <img src="assets/summon/preview/blazing_prev.png" alt="Banner 2">
        <div class="preview-label">Step Up</div>
      </div>
      <div class="preview-item" data-banner="2">
        <img src="assets/summon/preview/newyear_prev.png" alt="Banner 3">
        <div class="preview-label">Single/Multi</div>
      </div>
    </div>
  </div>

  <!-- Full-Width Banner Slideshow -->
  <div class="banner-slideshow" id="banner-slideshow"></div>

  <!-- Main Banner Carousel -->
  <div class="banner-carousel-container">
    <button class="carousel-arrow left" id="arrow-left">◀</button>
    <div class="banner-carousel" id="banner-carousel">
      <!-- Banners loaded dynamically -->
    </div>
    <button class="carousel-arrow right" id="arrow-right">▶</button>
    
    <!-- Carousel Dots -->
    <div class="carousel-dots" id="carousel-dots"></div>
  </div>

  <!-- Banner Info Panel -->
  <div class="banner-info-panel">
    <h2 id="banner-name" class="banner-name">Loading...</h2>
    <p id="banner-description" class="banner-description"></p>
    <p id="banner-timer" class="banner-timer"></p>
  </div>

  <!-- Step Progress (for step-up banners) -->
  <div id="step-progress" class="step-progress hidden">
    <div class="step-indicator">
      <span class="step-label">Summon Level</span>
      <span class="step-current" id="step-current">1</span>
      <span class="step-divider">/</span>
      <span class="step-total" id="step-total">4</span>
    </div>
  </div>

  <!-- Summon Buttons -->
  <div class="summon-actions">
    <button class="btn-summon single" id="btn-single" disabled>
      <span class="summon-label">SINGLE</span>
      <div class="summon-cost">
        <img src="assets/icons/pearl_icon.png" alt="Pearl" class="cost-icon">
        <span class="cost-amount" id="single-cost">5</span>
      </div>
    </button>
    
    <button class="btn-summon multi" id="btn-multi">
      <span class="summon-label">MULTI</span>
      <div class="summon-cost">
        <img src="assets/icons/pearl_icon.png" alt="Pearl" class="cost-icon">
        <span class="cost-amount" id="multi-cost">30</span>
      </div>
    </button>
  </div>

  <!-- Bottom Action Bar - SMALLER BUTTONS -->
  <div class="bottom-action-bar">
    <button class="action-btn" id="btn-featured">
      <img src="assets/icons/featured_icon.png" alt="Featured">
      <span>View Extra Effect Characters</span>
    </button>
    
    <button class="action-btn dropdown" id="btn-more">
      <span class="dropdown-icon">▼</span>
    </button>
    
    <button class="action-btn" id="btn-contents">
      <img src="assets/icons/contents_icon.png" alt="Contents">
      <span>Summon Contents</span>
    </button>
    
    <button class="action-btn" id="btn-rates">
      <img src="assets/icons/rates_icon.png" alt="Rates">
      <span>Drop Rate</span>
    </button>
  </div>

  <!-- Summon Result Modal -->
  <div id="summon-modal" class="summon-modal hidden">
    <div class="modal-overlay"></div>
    <div class="modal-content">
      <div class="summon-animation">
        <video id="summon-video" class="summon-video" autoplay muted>
          <source src="assets/summon/animations/summon_portal.mp4" type="video/mp4">
        </video>
      </div>
      <div id="result-display" class="result-display hidden">
        <div class="result-header">
          <div class="result-title">Summon Results</div>
          <div class="result-subtitle">New characters obtained!</div>
        </div>

        <!-- Result Statistics -->
        <div class="result-stats" id="result-stats"></div>

        <!-- Result Grid -->
        <div class="result-grid" id="result-grid">
          <!-- Results populated dynamically -->
        </div>

        <button class="btn-continue" id="btn-continue">Continue</button>
      </div>
    </div>
  </div>

  <!-- HUD Bottom Bar -->
  <div class="bottom-bar">
    <div class="bottom-bar-content">
      <button class="hud-button" id="btn-village" aria-label="Village">
        <img src="assets/icons/village_icon.png" alt="Village">
      </button>
      <button class="hud-button" id="btn-characters" aria-label="Characters">
        <img src="assets/icons/characters_icon.png" alt="Characters">
      </button>
      <button class="hud-button" id="btn-fusion" aria-label="Fusion">
        <img src="assets/icons/fusion_icon.png" alt="Fusion">
      </button>
      <button class="hud-button" id="btn-teams" aria-label="Teams">
        <img src="assets/icons/teams_icon.png" alt="Teams">
      </button>
      <button class="hud-button" id="btn-tools" aria-label="Tools">
        <img src="assets/icons/guilds_icon.png" alt="Tools">
      </button>
      <button class="hud-button active" id="btn-summon" aria-label="Summon">
        <img src="assets/icons/summon_icon.png" alt="Summon">
      </button>
      <button class="hud-button" id="btn-missions" aria-label="Missions">
        <img src="assets/icons/missions_icon.png" alt="Missions">
      </button>
      <button class="hud-button" id="btn-inventory" aria-label="Inventory">
        <img src="assets/icons/inventory_icon.png" alt="Inventory">
      </button>
      <button class="hud-button" id="btn-shop" aria-label="Shop">
        <img src="assets/icons/shop_icon.png" alt="Shop">
      </button>
    </div>
  </div>

  <!-- Scripts -->
  <script src="js/audio-manager.js"></script>
  <script src="js/music-player.js"></script>
  <script src="js/user-profile.js?v=2"></script>
  <script src="js/resources.js"></script>
  <script src="js/character_inv.js"></script>
  <script src="js/ninja-rank.js"></script>
  <script src="js/exp-rewards.js"></script>
  <script src="js/top-bar-enhanced.js"></script>
  <script src="js/summon/summon-data.js"></script>
  <script src="js/summon/summon-carousel.js"></script>
  <script src="js/summon/summon-engine.js"></script>
  <script src="js/summon/summon-ui.js"></script>
  <script src="js/summon/summon-animation.js"></script>
  <script src="js/summon/summon-banner-slideshow.js"></script>
  <script src="js/summon/summon-dev-panel.js"></script>
  <script src="js/summon.js"></script>

  <!-- Initialize Systems -->
  <script>
    // Wait for all modules to load, then initialize
    window.addEventListener('DOMContentLoaded', () => {
      // Initialize banner slideshow
      if (window.BannerSlideshow) {
        window.BannerSlideshow.init('banner-slideshow');
      }

      // Initialize dev panel
      if (window.DevPanel) {
        window.DevPanel.init();
      }
    });
  </script>
  
  <!-- Wind Animation Script -->
  <script>
    // Generate wind particles
    (function() {
      const container = document.getElementById('wind-particles');
      const particleCount = 30;
      
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'wind-particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 10 + 's';
        particle.style.animationDuration = (15 + Math.random() * 10) + 's';
        container.appendChild(particle);
      }
    })();
  </script>

  <!-- Settings Modal Script -->
  <script src="js/settings-modal.js?v=2"></script>

  <!-- Navigation Script -->
  <script src="js/navigation.js"></script>

  <!-- Music Initialization -->
  <script>
    // Music initialization - start BGM on page load
    (function() {
      if (typeof window.AudioManager === 'undefined') {
        console.log('[Music] AudioManager not available on this page');
        return;
      }

      console.log('[Music] Initializing background music...');

      const startMusic = () => {
        if (!window.AudioManager.currentBGM) {
          const bgm = window.AudioManager.playBGM('assets/music/general.mp3');
          if (bgm) {
            console.log('[Music] Background music started');
          }
        }
      };

      // Try immediate playback (may be blocked by browser)
      setTimeout(startMusic, 500);

      // Also try on first click
      document.addEventListener('click', startMusic, { once: true });
    })();
  </script>

      </div><!-- .game-content -->
    </div><!-- .game-canvas -->
  </div><!-- .game-canvas-wrapper -->
</body>
</html>
