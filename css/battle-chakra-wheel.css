/* ===================================================
   CHAKRA WHEEL SYSTEM - Complete Visual Specification
   =================================================== */

/* === Chakra Wheel Base (Circular Frame) === */
.chakra-wheel {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  pointer-events: all;
  cursor: pointer;
  z-index: 5;
  border-radius: 50%;
}

/* Active portrait - large wheel (110px for 90px portrait) */
.active-portrait-container .chakra-wheel {
  width: 110px;
  height: 110px;
}

/* Bench portrait - smaller wheel (45px for 36px portrait, 40% of 90px) */
.bench-portrait-container .chakra-wheel {
  width: 48px;
  height: 48px;
}

/* === Chakra Ring Layer Container === */
.chakra-ring {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  pointer-events: none;
}

/* Ring sizing - each layer expands outward */
.chakra-ring.layer-1 {
  /* First ring - brightest, base layer (4 chakra max) */
  width: 100%;
  height: 100%;
}

.chakra-ring.layer-2 {
  /* Second ring - slightly darker (5-8 chakra) */
  width: 115%;
  height: 115%;
}

.chakra-ring.layer-3 {
  /* Third ring - noticeably darker (9-12 chakra) */
  width: 130%;
  height: 130%;
}

.chakra-ring.layer-4 {
  /* Fourth ring - final layer, turns red when full */
  width: 145%;
  height: 145%;
}

/* === Chakra Arc Segments === */
/* Segments are wedge-shaped arc slices on the ring's circumference */
.chakra-segment {
  position: absolute;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

/* Arc segment wedge shape - NOT circles/orbs */
.chakra-segment::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: conic-gradient(
    from 0deg,
    transparent 0deg,
    transparent 35deg,
    rgba(100, 150, 255, 0.3) 40deg,
    rgba(120, 170, 255, 0.7) 45deg,
    rgba(150, 200, 255, 1) 50deg,
    rgba(120, 170, 255, 0.7) 55deg,
    rgba(100, 150, 255, 0.3) 60deg,
    transparent 65deg,
    transparent 360deg
  );
  border-radius: 50%;
  filter: drop-shadow(0 0 4px rgba(100, 150, 255, 0.6));
}

/* Brightness levels by layer */
.chakra-ring.layer-1 .chakra-segment {
  /* Brightest - highly saturated blue-white */
  opacity: 1;
  filter: brightness(1.3) drop-shadow(0 0 4px rgba(150, 180, 255, 0.8));
}

.chakra-ring.layer-2 .chakra-segment {
  /* Slightly darker - muted blue */
  opacity: 0.85;
  filter: brightness(1.0) drop-shadow(0 0 3px rgba(120, 160, 220, 0.6));
}

.chakra-ring.layer-3 .chakra-segment {
  /* Noticeably darker blue */
  opacity: 0.7;
  filter: brightness(0.8) drop-shadow(0 0 2px rgba(100, 140, 200, 0.4));
}

.chakra-ring.layer-4 .chakra-segment {
  /* Darkest blue, but will turn red when full */
  opacity: 0.6;
  filter: brightness(0.7) drop-shadow(0 0 2px rgba(80, 120, 180, 0.3));
}

/* Red ultimate-ready ring - ONLY affects topmost ring, NOT the entire card */
.chakra-ring.ultimate-ready .chakra-segment::before {
  background: conic-gradient(
    from 0deg,
    transparent 0deg,
    transparent 35deg,
    rgba(255, 80, 80, 0.4) 40deg,
    rgba(255, 100, 100, 0.8) 45deg,
    rgba(255, 50, 50, 1) 50deg,
    rgba(255, 100, 100, 0.8) 55deg,
    rgba(255, 80, 80, 0.4) 60deg,
    transparent 65deg,
    transparent 360deg
  );
  filter: drop-shadow(0 0 6px rgba(255, 50, 50, 0.9)) drop-shadow(0 0 12px rgba(255, 50, 50, 0.5));
  animation: ultimatePulse 0.5s ease-out;
}

@keyframes ultimatePulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.3); }
  100% { transform: scale(1); }
}

/* Segment positioning - evenly spaced on circumference by rotation */
/* Each segment is a wedge that rotates around the center */
.chakra-segment[data-position="0"] { transform: rotate(0deg); }    /* 12 o'clock */
.chakra-segment[data-position="1"] { transform: rotate(90deg); }   /* 3 o'clock */
.chakra-segment[data-position="2"] { transform: rotate(180deg); }  /* 6 o'clock */
.chakra-segment[data-position="3"] { transform: rotate(270deg); }  /* 9 o'clock */

/* === Chakra Gain Animation (Simple Appear) === */
/* Segments simply appear/fade in, NO orbs or flying particles */

/* Segment arrival flare */
.chakra-segment.arriving {
  animation: segmentArrive 0.5s ease-out;
}

@keyframes segmentArrive {
  0% {
    transform: scale(0.5);
    opacity: 0;
  }
  50% {
    transform: scale(1.4);
    filter: brightness(2);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

/* === LIGHTNING EFFECT (Jagged Bolts Around Chakra Wheel Rim) === */
/* Lightning wraps around the wheel's edge, NOT radiating outward */
.lightning-effect {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 160%;
  height: 160%;
  transform: translate(-50%, -50%);
  pointer-events: none;
  z-index: 200;
  animation: lightningFlicker 0.3s steps(3) infinite;
}

@keyframes lightningFlicker {
  0%, 40%, 100% { opacity: 1; }
  20%, 60%, 80% { opacity: 0.6; }
}

/* Jagged lightning bolt wrapping the rim */
.lightning-bolt {
  position: absolute;
  left: 50%;
  top: 50%;
  width: 50%;
  height: 50%;
  transform-origin: 0% 0%;
  filter: blur(0.5px);
  clip-path: polygon(
    0% 0%,
    8% 5%,
    3% 15%,
    12% 22%,
    6% 35%,
    15% 42%,
    10% 55%,
    18% 63%,
    12% 78%,
    20% 85%,
    15% 100%,
    10% 85%,
    5% 70%,
    2% 50%,
    0% 30%,
    0% 0%
  );
}

/* === RED LIGHTNING (Ultimate - Double Click) === */
/* Short, sharp, aggressive red bolts with quick flicker */
.lightning-effect.red {
  animation-duration: 0.3s;
}

.lightning-effect.red .lightning-bolt {
  background: radial-gradient(ellipse at center,
    rgba(255, 60, 60, 1) 0%,
    rgba(255, 40, 40, 1) 40%,
    rgba(200, 30, 30, 0.8) 70%,
    rgba(150, 20, 20, 0) 100%
  );
  box-shadow:
    0 0 6px rgba(255, 50, 50, 1),
    0 0 14px rgba(255, 50, 50, 0.8),
    0 0 22px rgba(255, 80, 80, 0.4);
  animation: redLightningPulse 0.3s ease-out;
}

/* Position bolts around the rim (9 bolts) */
.lightning-effect.red .lightning-bolt:nth-child(1) { transform: rotate(0deg); }
.lightning-effect.red .lightning-bolt:nth-child(2) { transform: rotate(40deg); }
.lightning-effect.red .lightning-bolt:nth-child(3) { transform: rotate(80deg); }
.lightning-effect.red .lightning-bolt:nth-child(4) { transform: rotate(120deg); }
.lightning-effect.red .lightning-bolt:nth-child(5) { transform: rotate(160deg); }
.lightning-effect.red .lightning-bolt:nth-child(6) { transform: rotate(200deg); }
.lightning-effect.red .lightning-bolt:nth-child(7) { transform: rotate(240deg); }
.lightning-effect.red .lightning-bolt:nth-child(8) { transform: rotate(280deg); }
.lightning-effect.red .lightning-bolt:nth-child(9) { transform: rotate(320deg); }

@keyframes redLightningPulse {
  0% { opacity: 0; transform: scale(0.8); }
  30% { opacity: 1; transform: scale(1); }
  60% { opacity: 0.7; }
  100% { opacity: 1; }
}

/* === GOLD LIGHTNING (Secret Technique - Triple Click) === */
/* Thicker, brighter gold-white bolts with dramatic glow bloom */
.lightning-effect.gold {
  animation-duration: 0.6s;
}

.lightning-effect.gold .lightning-bolt {
  width: 55%;
  height: 55%;
  background: radial-gradient(ellipse at center,
    rgba(255, 255, 240, 1) 0%,
    rgba(255, 235, 120, 1) 30%,
    rgba(255, 215, 0, 0.9) 60%,
    rgba(200, 165, 0, 0) 100%
  );
  box-shadow:
    0 0 8px rgba(255, 255, 255, 1),
    0 0 18px rgba(255, 215, 0, 1),
    0 0 32px rgba(255, 215, 0, 0.8),
    0 0 48px rgba(255, 235, 120, 0.6);
  filter: blur(1px);
  animation: goldLightningPulse 0.6s ease-out;
}

/* Position bolts around the rim (10 bolts, more coverage) */
.lightning-effect.gold .lightning-bolt:nth-child(1) { transform: rotate(0deg); }
.lightning-effect.gold .lightning-bolt:nth-child(2) { transform: rotate(36deg); }
.lightning-effect.gold .lightning-bolt:nth-child(3) { transform: rotate(72deg); }
.lightning-effect.gold .lightning-bolt:nth-child(4) { transform: rotate(108deg); }
.lightning-effect.gold .lightning-bolt:nth-child(5) { transform: rotate(144deg); }
.lightning-effect.gold .lightning-bolt:nth-child(6) { transform: rotate(180deg); }
.lightning-effect.gold .lightning-bolt:nth-child(7) { transform: rotate(216deg); }
.lightning-effect.gold .lightning-bolt:nth-child(8) { transform: rotate(252deg); }
.lightning-effect.gold .lightning-bolt:nth-child(9) { transform: rotate(288deg); }
.lightning-effect.gold .lightning-bolt:nth-child(10) { transform: rotate(324deg); }

@keyframes goldLightningPulse {
  0% { opacity: 0; transform: scale(0.7); filter: blur(2px); }
  20% { opacity: 1; transform: scale(1); filter: blur(1px); }
  40% { opacity: 0.85; filter: blur(0.8px); }
  60% { opacity: 1; filter: blur(1px); }
  80% { opacity: 0.9; filter: blur(0.9px); }
  100% { opacity: 1; filter: blur(1px); }
}

/* Segment sizing is handled by the ::before pseudo-element above */

/* === Debug/Development Helper === */
.chakra-wheel.debug {
  outline: 1px dashed rgba(255, 0, 0, 0.3);
}

.chakra-ring.debug {
  outline: 1px dashed rgba(0, 255, 0, 0.3);
}
